---
import { getCollection } from "astro:content";

import type { StyledProps } from "@/types";

import Decorator from "@/components/common/Decorator.astro";
import Link from "@/components/common/Link.astro";

import { indexType, route } from "@/consts";
import { createRouteUrl } from "@/lib/utils";

interface Props extends StyledProps {}

const { class: className = "", style: styleAttr = "" } = Astro.props;

const tags = await getCollection(
  "postIndex",
  (index) => index.data.type === indexType.Tags,
);
---

<div class:list={[className, "card space-y-1 px-4 py-2"]} style={styleAttr}>
  <Decorator>
    <span>Tags</span>
  </Decorator>
  <ul class="flex flex-wrap gap-2">
    {
      tags.map((tag) => (
        <li>
          <Link
            class="text-foreground/70 hover:text-accent-foreground text-sm transition-colors"
            href={createRouteUrl(route.Index, tag.id)}
          >
            {tag.data.name}
          </Link>
        </li>
      ))
    }
  </ul>
</div>
