---
import { Icon } from "astro-icon/components";
import type { HTMLTag, Polymorphic } from "astro/types";

interface ExtraProps {
  text?: string;
  icon?: string;
}

export type Props<Tag extends HTMLTag> = Polymorphic<{ as: Tag }> & ExtraProps;

const { as: Tag = "p", text, icon, class: className, ...props } = Astro.props;

const decoratorClass =
  "before:absolute before:w-1 pl-3 before:my-auto before:h-5 before:left-0 before:mr-2 before:bg-[var(--primary)] before:rounded-md";
---

<Tag
  class:list={[
    className,
    !icon ? decoratorClass : "",
    "relative flex items-center",
  ]}
  {...props}
>
  {
    icon && (
      <Icon class="icon mr-1 bg-[var(--primary)]" data-size="sm" name={icon} />
    )
  }
  {text}
  <slot />
</Tag>
