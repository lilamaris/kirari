---
import type { StyledProps } from "@/types";

import Link from "@/components/common/Link.astro";
import Img from "@/components/common/Img.astro";
import HueController from "@/components/ui/HueController.svelte";
import ThemeController from "@/components/ui/ThemeController.svelte";

import { layoutConfig, themeConfig, routeRegistry } from "@/consts";
import { objectEntries, toInlineStyle, toStyleVars } from "@/lib/utils";

interface Props extends StyledProps {}

const { class: className = "", style: styleAttr = "" } = Astro.props;
const { contentWidth, navigationHeight } = layoutConfig;
const { siteIconUrl } = themeConfig;
---

<nav
  class:list={[
    className,
    "bg-surface/60 flex w-full justify-center backdrop-blur-sm",
    "h-[var(--navigationHeight)]",
  ]}
  style={toInlineStyle([
    styleAttr,
    toStyleVars({ navigationHeight, contentWidth }),
  ])}
>
  <div class="flex max-w-[var(--contentWidth)] flex-1 items-center gap-4">
    <Img src={siteIconUrl} class="size-4 rounded-sm" />
    <ul class="flex gap-4">
      {
        objectEntries(routeRegistry).map(([_, route]) => (
          <li>
            <Link
              href={route.href}
              class="text-foreground/70 hover:text-foreground font-semilight text-sm transition-colors"
            >
              {route.label}
            </Link>
          </li>
        ))
      }
    </ul>
    <div class="ml-auto flex gap-px">
      <HueController client:only />
      <ThemeController client:only />
    </div>
  </div>
</nav>
